TCP 基础教程

每次发送报文，都是声明发送端的当前状态，

**三次握手**

- SYN
- SYN, ACK
- ACK

**四次挥手**

- FIN
- ACK
- FIN, ACK
- ACK

**为什要三次握手**

- 因为建立连接时，服务器的确认 ACK 和请求同步 SYN 可以放在一个报文里，而断开连接时，服务器可能还有数据要传送，因此，必须先发一个客户端断开连接请求的确认 ACK，以免客户端超时重传，待服务器的数据传送完毕后，再发送一个请求断开连接的报文段。

**为什么要四次挥手？**

- A 向 B 发送一个连接释放请求报文，代表 A 的数据传送完了，请求释放连接；
- B 收到后，B 立即向 A 发送一个确认报文，代表 B 已经知道 A 没有数据要传送了，但是 B 可能还有数据要向 A 传送；
- B 的数据传送完后，向 A 发送一个连接释放请求报文，代表 B 的数据也传送完了，请求释放连接；
- A 收到后，也立即向 B 发送一个确认报文，同时等待 2MSL 后，连接断开。

是协议（算法）性能和服务质量的一种权衡。

## 参考链接

1. [“三握四挥”正如大家所熟悉的，采用的是C/S模式即"客户机-服务器模式"的tcp连接是计算机网络的基础，本文将直奔主题讲 - 掘金](https://juejin.cn/post/7021088172272533511)
2. [浅学计网：TCP三握四挥-腾讯云开发者社区-腾讯云](https://cloud.tencent.com/developer/article/2359202)