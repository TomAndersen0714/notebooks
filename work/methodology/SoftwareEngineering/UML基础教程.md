# UML(统一建模语言)基础教程


## UML简介

UML（Unified Modeling Language，统一建模语言）是由对象管理组织（Object Management Group, OMG）制定的一个通用的、可视化的建模语言标准，可以用来可视化、描述、构造和文档化软件密集型系统的各种工件，并且已被ISO确立为国际标准。

UML（统一建模语言）最初确实是为面向对象方法设计的，但它并不仅限于面向对象建模。UML可以用于描述和表示各种类型的系统和问题领域，不仅局限于面向对象的软件分析和设计。


### UML适用场景

1. 项目采用了OO的方法论
2. 问题复杂，需要更加抽象的方式来概括描述，抓住问题本质，同时提高交流效率
3. 方案需要归档，已便后续复用，减少重复开发成本


### UML不适用的场景

1. OO技术使用很少，项目中现有的方式已经完全适用
2. 需求实现难度低，文字描述就可以阐述清楚


### UML历史



### Object-Oriented基本概念

对象（Objects）: 对象代表一个实体的基本构建块.

类（Class）: 类是对象的蓝图.

抽象（Abstraction）: 抽象代表现实世界中实体的行为.

封装（Encapsulation）: 封装是将数据绑定在一起，并隐藏他们外部世界的机制。

继承（Inheritance）: 继承是从现有的机制作出新的类。

多态性（Polymorphism）: 定义的机制来以不同的形式存在.


## UML2事物

结构事物（Structural Thing）：UML模型中的名词

行为事物（Behavioral Thing）：UML模型中的动词

分组事物（Grouping Thing）：UML模型中的组织

注释事物（Annotational Thing）：UML模型的解释部分


## UML2关系

依赖关系（Dependency）

extend、include、dependency

关联关系（Association）

泛化关系（Generalization）

实现关系（Realization）


## UML2图


### 结构图（Structural Diagrams）

#### 包图（Package Diagrams）

#### 类图（Class or Structural Diagrams）

#### 对象图（Object Diagrams）

#### 组合结构图（Composite Structure Diagrams）

#### 组件图（Component Diagrams）

#### 部署图（Deployment Diagrams）


### 行为图（Behavioral Diagrams）

#### 用例图（Use Case Diagrams）

用于描述User和System（Use Case）之间的联系，常用于业务分析和需求分析阶段。

组成元素：参与者（Actor）、用例（Use Case）、关系、系统。

关系：关联、泛化、包含、扩展


#### 活动图（Activity Diagrams）

#### 状态图、状态机图（State Machine Diagrams）

#### 通信图（Communication Diagrams）

#### 协作图（Collaboration Diagram）

#### 顺序图（Sequence Diagrams）

#### 时序图（Timing Diagrams）

#### 交互概览图（Interaction Overview Diagrams）


## UML工具


### PlantUML

PlantUML是一种开源工具，定义了一种特殊的描述性语言来表示图表，基于这些描述语言可以生成对应的可视化图表，包括UML（统一建模语言）图形。

它允许开发人员和设计师使用纯文本来描述系统的结构、行为和交互，然后自动生成相应的图形表示。

使用PlantUML，您可以使用简单的文本语法来定义类、接口、关系、活动、时序等元素，并通过解析这些文本描述生成对应的图形。它支持多种类型的UML图，包括类图、时序图、活动图、用例图、组件图等。

https://github.com/plantuml/plantuml

https://www.plantuml.com/

[微信公众号-程序媛山楂-神仙级UML工具，助你高效绘制流程图～](https://mp.weixin.qq.com/s/qyE4dpiwqfBpMbwR6TH68Q)


### ProcessOn

Web网页应用，云端存储，部分功能免费

https://www.processon.com/

[微信公众号-ProcessOn-产品经理常用UML图之「用例图」，附8张优质实例图！](https://mp.weixin.qq.com/s/_ZmXacP3MYRLK_GwBnLWYw)


### Visual Paradigm

Desktop桌面应用，收费，但同时支持社区免费版本

https://www.visual-paradigm.com/cn/download/community.jsp

[微信公众号-陶朱公Boy-绝杀processOn，这款UML画图神器，阿里字节都用疯了，你还不知道？](https://mp.weixin.qq.com/s/WWqbBMS7-3TNGcOXLJ26KQ)


### Enterprise Architect

Desktop桌面应用，收费，提供30天试用版，同时支持学术license


## 软件开发UML分析设计过程解析

取自《UML2面向对象分析与设计》。本章节所讨论的UML分析设计过程起始于业务建模，接下来是需求建模、用例分析、架构设计和构建设计，最后终止于代码实现。当然，这个过程并不是完整的软件开发过程（如缺少计划、管理、测试、维护等方面内容），因为这里重点讲解的是分析和设计。在实际的软件开发过程中，这些阶段可以是多次迭代重复的增量开发过程，而不一定是线性的顺序过程。

### 业务建模

通过软件建模的方式，分析和理解待开发或者已有的业务，描述业务流程。此阶段的目标是认识业务的本质，此阶段的理解是后续用例建模的基础。

本阶段中主要使用扩展的UML用例图（Use Case Diagrams）进行业务建模，来描述整体业务，采用UML活动图（Activity Diagrams）或顺序图（Sequence Diagrams）来描述业务用例，进行业务流程的细化（或User之间的交互）。

如：自助点餐软件中，User有服务员、食客、厨师等等，Use Case有点餐、收拾餐桌、获取菜单等等，同时可以使用顺序图来描述各个User之间的依赖和交互关系；如银行交易系统，User有储户、柜员、行长等，Use Case有开户、存钱、取钱等，也**可以使用用例图（Use Case Diagrams）来描述User-System之间的关系，使用顺序图（Sequence Diagrams）来描述User-System、User-User之间的交互**。

对于软件工程师而言，业务建模只是辅助环节，并非每个项目、每个软件人员都要去实施该过程。当开发人员对于待处理业务非常熟悉，而业务本身也没有改进的必要时，就没有必要进行业务建模。当然，在很多软件项目开发的初期，通过业务建模可以帮助开发团队快速理解业务现状。

如，RUP方法中业务建模的**主要目标**：
1. 理解业务需求：通过与业务领域专家的合作，深入了解组织的业务需求，包括业务流程、业务规则、业务约束等。
2. 揭示业务流程和规则：通过建模工具和技术，识别和描述组织的业务流程和规则，包括业务活动、业务用例、业务规则等。
3. 发现问题和改进机会：通过业务建模的分析和讨论，识别业务流程中的问题、瓶颈和改进机会，为业务流程的优化提供依据。
4. 促进沟通和共识：通过业务建模的结果，促进开发团队和利益相关者之间的沟通和理解，确保对业务需求的一致性和共识。


业务建模的**主要任务**：
1. 使用用例图、活动图**描述目标组织的业务现状**，梳理业务组织的过程、角色和职责
2. 生成对应的**业务用例模型**、**业务对象模型**


#### 业务用例模型

**业务用例**：描述了在业务流程中，业务节点与参与者之间的交互。

目标：**描述业务现状，描述业务组织与外部用户User，或者说组织外部业务参与者的交互**
组成元素：业务参与者、业务用例、业务用例描述
使用工具：
1. 用例图：描述业务参与者、业务用例
2. 活动图、带泳道的活动图：描述业务用例


#### 业务对象模型

**业务对象**：是指代业务领域中的实体或概念，它们是在软件系统中进行处理和操作的主要对象，可以是某个人、某个事物（实体），或者某个抽象的概念。

目标：**描述业务现状，描述业务组织内部业务参与者的交互**
组成元素：业务工人、业务实体、业务用例实现
使用工具：
1. RUP类图


#### 从业务模型到系统模型

对于业务模型中，每个需要实现的业务用例，在系统模型中都有一个或者多个系统用例，或者子系统与之对应。例如，在银行系统中，对于“存款”业务用例，可以确定一个“存款”系统用例来实现该业务，而对于相对复杂的“转账”业务，可能需要多个系统用例来实现，这些用例可以构成一个用例包，或者一个子系统。


### 需求建模(用例建模)

本阶段采用**UML用例图**（Use Case Diagrams）来进行需求建模，采用**用例文档**描述软件需求，作为后续用例分析的输入。

业务模型描述的是现状（Actuality），而待开发的软件系统所要解决的问题一般并不等同于整个业务模型描述的所有业务，而是从业务模型中抽出来的部分系统需求，这个抽取过程就是需求建模的过程。

传统的需求建模主要采用文字形式的需求规格说明书，并适当辅助一些功能分解图、IPO图等机制。UML提供的用例图，则是另外一种有效的需求建模手段，用例建模的过程就是需求定义的过程，最终通过用例模型来表示目标业务模型的需求。


#### 理解需求

需求是客户可接受的、软件系统必须满足的条件或具备的能力。在软件开发中，用户常有不同类型的软件需求，RUP中给出了FURPS+的需求模型，该模型将需求分为以下几种类型。
1. 功能性（Functionality）：详细描述了系统必须有能力执行的动作，通过详细说明所期望的输入和输出条件来描述系统行为。
2. 可用性（Usability）：人为因素（审美学、易学性、易用性）和用户界面、用户文档、培训资料的一致性
3. 可靠性（Reliability）：主要包括故障的频率和严重性、输出结果的精确性、故障平均时间（Mean-Time-To-Failure，MTTF）、故障恢复能力和程序的可预见性。
4. 性能（Performance）
5. 可支持性（Supportabilitily）
6. 设计约束、接口需求、物理需求等、

功能需求之外的需求，统称为非功能性需求。

需求工程主要包括定义需求、分析需求两个方面的活动。需求工程中的难点在于定义需求，需要联合多方参与者共同制定，沟通成本较大。

#### 从业务模型抽取需求

正如前文所述，业务模型描述了业务现状。在这些现状中，有些业务可能已经运转得很好了，不需要改进，也就没有必要作为需求，在系统中实现。而其他更多的业务，可能在运转过程中存在这样或者那样的问题，这些问题就可以成为业务待改进的改进点，也就可能转换为软件系统的需求。

##### 寻找业务改进点

一般情况下，开发人员可以从以下4个方面来寻找业务的改进点。
1. 优化复杂的业务流程：业务复杂且冗长
2. 优化复杂的业务逻辑：业务节点复杂
3. 统一业务对象降低复杂度：将在多个业务流程中频繁使用的实体抽象为业务对象，统一规范
4. 自动化业务实现提效：某些要求定时、实时处理的业务，可以通过软件系统实现自动化进而提效

总结下来就2点，一个是降低业务复杂度，另一个是实现业务自动化


##### 定义项目愿景

确定业务改进点只是第一步，并非所有的系统改进点后续都会转换为软件需求。用户可能会由于自身支付能力等因素，而选取部分的改进点，也就是用户的愿景（Vision），这是用户希望改进的内容，也是软件项目的目标。

愿景包含了待开发系统设定的目标和约束，代表了项目涉及的所有人达成的第一个共识，是项目核心需求的概览，为更详细的软件需求提供了契约型的依据，而软件开发团队则需要根据愿景（Vision）来指导后续的需求和设计。

一个好的愿景（Vision）应该包含以下5个特点：
1. 具体的（Specific）：愿景应该是具体的，包括业务问题的理想状态，以确保最后的实现是有意义的。
2. 相关的（Relevant）：愿景应该与待解决的问题强相关。
3. 可测量的（Measurable）：愿景应该是可测量的，故而项目团队可以确定项目的成功与否，以及是否满足既定目标。
4. 可实现的（Achievable）：在给定资源的前提下，愿景必须是可以实现的。虚假的愿景，只会导致项目失败，或者目标转变为蒙混过关。
5. 基于时间的（Time-based）：项目愿景应该必须存在deadline，无期限的项目只会使得团队缺少动力。


##### 导出软件（系统）需求

在确定业务改进点，和项目愿景之后，就可以结合这两点导出软件需求。业务改进点中，被包含进项目愿景中的，即可以作为软件需求（如：某个业务流程的信息化、自动化等）。而不在项目愿景之中的改进点，则可以作为“潜在需求”归档。若后续客户有意提出新的愿景，则可以将“潜在需求”作为业务改进点，继续和客户商讨和确定。


### 用例分析

采用UML用例分析技术分析软件需求，建立软件系统的分析模型。本阶段主要使用扩展的类图（Class Diagrams）来表示类之间的静态关系，采用通信图（Communication Diagrams）来表示动态交互。

### 架构设计

在系统的全局范围内，以分析模型为基础，设计系统构件的实现细节。本阶段和构件设计阶段，则主要采用包、构建、部署等图表示软件架构，采用类图、状态机图、时序图来进行详细的类设计。

### 构件设计

本阶段根据架构设计的结果，将分析模型细化，设计系统构件的实现细节。

### 代码实现

本阶段将系统构件映射到目标语言上，即根据类图、时序图、状态机图等生成代码。

## 参考链接
1. [Wiki-Unified Modeling Language](https://en.wikipedia.org/wiki/Unified_Modeling_Language)
2. [UML2 Tutorial](https://sparxsystems.com/resources/tutorials/uml2/index.html)
3. 《UML2面向对象分析与设计（第2版）》-清华大学出版社
4. [Bilibili-北京航空航天大学-软件学院-UML2面向对象分析与设计](https://www.bilibili.com/video/BV1fq4y1q7KP)
5. [清华大学出版社-UML2面向对象分析与设计（第2版）-资源下载](http://www.tup.tsinghua.edu.cn/booksCenter/book_07138701.html#)
6. [阿里巴巴-Java开发手册(黄山版)](https://github.com/alibaba/p3c)
