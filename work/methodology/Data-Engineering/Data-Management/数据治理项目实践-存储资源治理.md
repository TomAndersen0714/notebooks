# 数据治理项目实践-存储资源治理

## 项目背景

由于业务早期发展迅猛，数仓存储资源相对充足，未提前应对潜在存储资源问题，随着无用表、生命周期、存储格式等问题不断积累，导致存储资源日益紧张，存储成本虚高，直到触发存储资源水位线告警。

到了业务增速放缓，基建完善后，回过头来看需要做大面积降本，需要对存储资源进行专项治理，降低存储成本。

## 项目分析

### 需求分析

搜集并了解利益相关者的需求和期望，以便有效沟通。

### 可行性分析

1. 创建 MVP 最小可行性产品进行项目的可行性的 POC 概念验证
2. 收集整理 POC 阶段中遇见的各种问题，提前做好风险把控
3. 后续在立项成功之后，再进行扩大再生产，同时解决 POC 过程中遇见的各种问题

### 预期收益

1. 基于 POC 结束后的收益，预测扩大再生产之后产生的收益
2. 梳理预期收益时
	1. 微观上，需要列出所有的收益人，明确现状、预期，及两者之间的收益
		1. 对内
		2. 对外
	2. 宏观上，需要列出集体的预期收益
		1. 对部门
		2. 对公司

## 项目设计

### 项目目标

阶段目标，到 xxx 时间完成 xxx 内容
最终目标，降低多少成本

### 项目计划

1. 基础工具开发
	1. 元数据采集工具
		1. 数据平台内置、开源工具采集、平台或者工具二开
		2. CDH 内置元数据图标库，以及元数据查询
		3. ClickHouse 内置系统表
	2. 表数据定期删除、冷备工具，归档数据批量还原工具
		1. ETL 任务定期读取配置并执行归档冷备，验证完成后删除原始数据
		2. ETL 任务支持配置和恢复归档的冷备数据
	3. 元数据监控和通知工具
		1. Airflow 通知 Feishu 工具
		2. ETL 任务定期统计
2. 元数据采集
	1. 采集查询日志、存储日志等
3. 元数据分析，识别和定位问题
	1. 表近 N 天被引用次数，升序
	2. 表存储格式，是否采取了 Parquet 或 Snappy 压缩格式
	3. 表存储空间
4. 设计方案，优化和解决问题
	1. 设置表生命周期，先冷备，冷备期间支持数据恢复，超期后删除
		1. 对应业务线研发与业务侧敲定生命周期
		2. 研发侧需要基于数据血缘，评估好数据删除对于产品和功能的影响范围，并同步业务侧
		3. 业务侧则需要根据产品当前功能和未来规划，同研发一起，敲定数据生命周期
	2. 合并数据表冗余分支，以算代存
		1. 如：聊天数据合并、交易数据合并
		2. 创建合并新表，并进行做好 DQC 数据对比和验证，Full Outer Join 主键
	3. 下线无用数据表
		1. 基于元数据引用次数等统计指标
5. 元数据监控和告警，避免问题复发
	1. 数据表生命周期是否设置监控
	2. 数据表引用次数、最近引用日期监控
	3. BI 看板
6. 项目成果阶段性总结
	1. 在治理之前，要做好现状相关的指标统计，便于后续项目治理过程中，项目结项时进行价值总结
	2. 在治理过程中，需要定期总结好过程指标，避免最后项目交付时，无法总结出对应的项目价值

## 项目实施

项目进度管理
项目质量管理
项目变更管理

## 项目交付

项目价值总结
1. 通过下线数据仓库无用表，总计 xxx 个，节约存储空间 xxx TB
2. 通过使用文件压缩方式，提升压缩比，节约存储空间 xxx TB
3. 通过全量表改增量表、冗余表合并搭配视图，在不改变使用方式的前提下，减少冗余数据存储，节约存储空间 xxx TB
4. 通过配置和实施生命周期，减少不必要的数据存储，节约存储空间 xxx TB，同时支持数据冷备和恢复，降低存储成本 xxx 元
5. 整体治理后为部门减少 xx% 总服务器费用，由原来的 xxxx 万元降低至 xxxx 万元

项目价值输出
1. 文档
2. PPT

## 项目复盘

流程复盘

## 参考链接

1. [知识星球 | 深度连接铁杆粉丝，运营高品质社群，知识变现的工具](https://articles.zsxq.com/id_6a21h2jpct5g.html)
2. [微信公众平台 - 数据治理实践｜存储资源治理](https://mp.weixin.qq.com/s/Cas6-FXmL8_hLLZU4E7mHw)