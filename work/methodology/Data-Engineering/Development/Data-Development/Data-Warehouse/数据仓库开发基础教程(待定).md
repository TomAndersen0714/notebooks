# 数仓开发基础教程



### 测试和生产环境

[大数据开发、测试、生产环境说明](https://xiaoduoai.feishu.cn/docs/doccn97RmqinKtcTwYoEUvliXdf) 

## 数据仓库基本概念

[数据仓库开发基础概念](work/methodology/Data-Engineering/Development/Data-Development/Data-Warehouse/数据仓库开发基础概念.md)


## 数仓开发基本流程

总的来说，数仓开发和传统的软件开发和数据库开发流程上区别不大，基本也是三步走，即分析—设计—实现

### 分析

1. 分析阶段，主要采用的是**自顶向下**的思想。
2. 主要内容是**梳理**需求方的指标需求，并将其**拆分**、**翻译**为数仓的标准指标定义的形式，即通常为“时间周期+修饰词（非时间粒度）+原子指标聚合”，并判断指标是否为可加性指标，即同粒度指标相加后，依旧具有类似的实际业务含义，如：按照子账号的粒度聚合后的会话量，多个子账号的会话量相加，依旧具备实际业务含义，但uv类指标直接相加通常无实际含义。
3. 其中需要注意的是，在计算某些比较复杂的指标时，需同时先统计组成此指标的一些前置指标（如：比值类指标，需要先计算其分子分母对应的指标），进行纵向的拆分，这会导致实际开发的指标，会多于需求文档中明面上列出的指标。在数仓开发的分析阶段，一定要将这些指标明确下来，避免设计和工作量预估错误。

### 设计

1. 设计阶段，主要采用的是**自底向上**的思想。
2. 主要内容是进行数仓模型的设计，即统计表的**表结构设计**。数仓中的所有指标统计表，都存在其相应的粒度，设计阶段主要是为了确定分析阶段中梳理出的指标应该存放在哪种粒度的统计表中，本阶段可以利用数据字典来查阅目前已经存在的数据表的粒度。
3. 如果已经存在对应粒度的统计表，则直接通过增加新的指标字段即可；如果不存在对应粒度的统计表，对于可加性指标而言，可以尝试寻找更细粒度的统计表，在其中添加对应的指标，在查询时进行聚合，或者从原始业务表中，自底向上进行构建新的统计表；而对于不可加性指标（如：uv等），则需要直接创建对应粒度的新表，用于存放对应粒度下的指标。
4. 设计阶段完成后，便可以确定，本次需求中，有哪些表结构发生了变动，哪些指标需要入库实现定时触发统计。

### 实现

1. 设计阶段完成之后，便是具体的**代码实现**过程，而其中具体的代码，目前多以**SQL**为主。
2. 与传统的数据库开发类似，数仓开发通常也会包含数据完整性约束规则的开发，以保证数据质量。
3. 开发上线完成后，还需要收集代码实现过程中，所有实际发生过的模型（即表结构和字段）变动信息，并将其更新到数据字典中，便于后续在开发同数据域的需求时，能快速判断是否需要新增或使用现有模型，同时提升数据的可复用性，减少元数据的沟通成本。

## 数仓搭建实践案例

[明察质检质检诊断-大数据技术方案](https://xiaoduoai.feishu.cn/docx/LvMDdkNReo0QNmxIeSxc38mZnUf) 

## 数据字典

[明察质检数据字典（大数据侧）](https://xiaoduoai.feishu.cn/docs/doccnDSC1UBuow5rrVo9dqSq1Ee) 

## 参考链接

1. [构建MaxCompute数据仓库的流程_云原生大数据计算服务 MaxCompute-阿里云帮助中心](https://help.aliyun.com/document_detail/114631.html)