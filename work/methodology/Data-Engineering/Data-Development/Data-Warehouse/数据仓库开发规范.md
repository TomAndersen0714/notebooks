# 数据仓库开发规范

依据约束力强弱及故障敏感性，规约依次分为【强制】、【推荐】、【参考】三大类。

## 数仓设计规范

### 模型

【强制】禁止逆向引用，如：ODS 层禁止引用 DWS 层、APP 层等上层数据
【推荐】不建议跨层引用，如：APP 层直接引用 ODS 层数据
【推荐】同一数据源在 ETL 过程中出现分支版本时，需要做好合并、去重和下沉，降低数据存储和使用开销

分层的目的
保存中间重复计算结果，提升数据复用率
分层的优势
分层的缺陷

### 命名

【建议】如果仓库已有固定命名风格，则优先和现有风格保持一致
【建议】ODS 数据接入层命名规范，`{子系统名}_{层次名}_{源子系统名}_{源子系统表中间名}_{生成周期}{增量/全量}`
- 生成周期：每天（d）、每季度（q）
- 增量/全量：增量（i）、全量（f）
- 子系统名，如：cnc
- 层次名，如：ods
- 源子系统名，如：dds
- 源子系统表中间名，如：user_info
【建议】CDM 中间层命名规范，`{子系统名}_{层次名}_{主题域名}_{子主题名}_{生成周期}{增量/全量}`
【建议】APP 应用层命名规范，`{子系统名}_{层次名}_{主题域名}_{子主题名}_{生成周期}{增量/全量}`
【建议】指标命名 `{指标名}_{指标计算类型}_{时间范围标识}`
- 指标名：浏览量（view）
- 指标类型：去重计数（ucnt），求和（sum）
- 时间范围标识：最近 7 天（1w）、最近一天（1d）、最近 N 天（nd） 和历史截至当天（td）等

## 数据质量规范

【强制】数仓接入新表后，需同时添加对应的 DQC 校验任务，保证新数据源的数据质量

## 参考链接

1. [微信-五分钟学大数据-最强最全面的数仓建设规范指南（纯干货建议收藏）](https://mp.weixin.qq.com/s/knlITkxLvHRy3Aq5RFXl_w)
2. [MaxCompute数据开发规范-阿里云帮助中心](https://help.aliyun.com/zh/maxcompute/maxcompute-data-development-specifications?spm=a2c4g.11186623.0.0.70591920Y06vCu#concept-226673)
3. [ClickHouse开发规范](work/component/Big-Data/ClickHouse/ClickHouse开发规范.md)
4. [HiveSQL开发规范](work/component/Big-Data/Apache-Hive/development/HiveSQL开发规范.md)